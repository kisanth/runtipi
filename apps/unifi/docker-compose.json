{
  "schemaVersion": 2,
  "services": [
    {
      "name": "0",
      "image": "mongo:3.6",
      "volumes": [
        {
          "hostPath": "db",
          "containerPath": "/data/db",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "dbcfg",
          "containerPath": "/data/configdb",
          "readOnly": false,
          "shared": false,
          "private": false
        }
      ]
    },
    {
      "name": "1",
      "image": "jacobalberty/unifi:${TAG:-latest}",
      "environment": [
        {
          "key": "DB_URI",
          "value": "mongodb://mongo/unifi"
        },
        {
          "key": "STATDB_URI",
          "value": "mongodb://mongo/unifi_stat"
        },
        {
          "key": "DB_NAME",
          "value": "unifi"
        }
      ],
      "volumes": [
        {
          "hostPath": "dir",
          "containerPath": "/unifi",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "data",
          "containerPath": "/unifi/data",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "log",
          "containerPath": "/unifi/log",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "cert",
          "containerPath": "/unifi/cert",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "init",
          "containerPath": "/unifi/init.d",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "run",
          "containerPath": "/var/run/unifi",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "./backup",
          "containerPath": "/unifi/data/backup",
          "readOnly": false,
          "shared": false,
          "private": false
        }
      ],
      "sysctls": {
        "net.ipv4.ip_unprivileged_port_start": 0
      },
      "user": "unifi"
    },
    {
      "name": "2",
      "image": "bash",
      "command": "bash -c 'tail -F /unifi/log/*.log'",
      "volumes": [
        {
          "hostPath": "log",
          "containerPath": "/unifi/log",
          "readOnly": false,
          "shared": false,
          "private": false
        }
      ]
    }
  ]
}